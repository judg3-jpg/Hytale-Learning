{
  "name": "Hero_Class",
  "description": "Hero class for Mega Walls - attach to player",
  "version": "1.0",
  "variables": [
    {
      "name": "valor_cooldown",
      "type": "float",
      "default": 25.0,
      "description": "Cooldown tracker for Valor Strike (ready at 25)"
    },
    {
      "name": "rally_cooldown",
      "type": "float",
      "default": 45.0,
      "description": "Cooldown tracker for Rally Cry (ready at 45)"
    },
    {
      "name": "is_hero",
      "type": "boolean",
      "default": true,
      "description": "Whether this player is a Hero class"
    }
  ],
  "graphs": [
    {
      "name": "Hero_Initialize",
      "trigger": "on_spawn",
      "nodes": [
        {
          "id": 1,
          "type": "event",
          "event": "on_spawn",
          "output": 2
        },
        {
          "id": 2,
          "type": "set_variable",
          "variable": "is_hero",
          "value": true,
          "output": 3
        },
        {
          "id": 3,
          "type": "set_variable",
          "variable": "valor_cooldown",
          "value": 25.0,
          "output": 4
        },
        {
          "id": 4,
          "type": "set_variable",
          "variable": "rally_cooldown",
          "value": 45.0,
          "output": 5
        },
        {
          "id": 5,
          "type": "set_player_property",
          "property": "max_health",
          "value": 22,
          "output": 6
        },
        {
          "id": 6,
          "type": "set_player_property",
          "property": "health",
          "value": 22,
          "output": 7
        },
        {
          "id": 7,
          "type": "give_item",
          "item": "wooden_sword",
          "slot": 0,
          "quantity": 1,
          "output": 8
        },
        {
          "id": 8,
          "type": "give_item",
          "item": "wooden_pickaxe",
          "slot": 1,
          "quantity": 1,
          "output": 9
        },
        {
          "id": 9,
          "type": "give_item",
          "item": "bread",
          "slot": 2,
          "quantity": 8,
          "output": 10
        },
        {
          "id": 10,
          "type": "display_message",
          "message": "You are now a HERO!",
          "target": "self"
        }
      ]
    },
    {
      "name": "Cooldown_Tick",
      "trigger": "on_update",
      "nodes": [
        {
          "id": 1,
          "type": "event",
          "event": "on_update",
          "output": 2
        },
        {
          "id": 2,
          "type": "get_variable",
          "variable": "valor_cooldown",
          "output_value": "valor_cd",
          "output": 3
        },
        {
          "id": 3,
          "type": "branch",
          "condition": "valor_cd < 25",
          "true_output": 4,
          "false_output": 5
        },
        {
          "id": 4,
          "type": "set_variable",
          "variable": "valor_cooldown",
          "value": "valor_cd + delta_time",
          "output": 5
        },
        {
          "id": 5,
          "type": "get_variable",
          "variable": "rally_cooldown",
          "output_value": "rally_cd",
          "output": 6
        },
        {
          "id": 6,
          "type": "branch",
          "condition": "rally_cd < 45",
          "true_output": 7,
          "false_output": null
        },
        {
          "id": 7,
          "type": "set_variable",
          "variable": "rally_cooldown",
          "value": "rally_cd + delta_time"
        }
      ]
    },
    {
      "name": "Valor_Strike",
      "trigger": "on_key_press",
      "trigger_key": "Q",
      "nodes": [
        {
          "id": 1,
          "type": "event",
          "event": "on_key_press",
          "key": "Q",
          "output": 2
        },
        {
          "id": 2,
          "type": "get_variable",
          "variable": "valor_cooldown",
          "output_value": "cd",
          "output": 3
        },
        {
          "id": 3,
          "type": "branch",
          "condition": "cd >= 25",
          "true_output": 5,
          "false_output": 4
        },
        {
          "id": 4,
          "type": "display_message",
          "message": "Valor Strike on cooldown!",
          "target": "self"
        },
        {
          "id": 5,
          "type": "set_variable",
          "variable": "valor_cooldown",
          "value": 0,
          "output": 6
        },
        {
          "id": 6,
          "type": "get_player_position",
          "output_value": "start_pos",
          "output": 7
        },
        {
          "id": 7,
          "type": "get_player_look_direction",
          "horizontal_only": true,
          "output_value": "direction",
          "output": 8
        },
        {
          "id": 8,
          "type": "math_multiply",
          "a": "direction",
          "b": 8,
          "output_value": "offset",
          "output": 9
        },
        {
          "id": 9,
          "type": "math_add",
          "a": "start_pos",
          "b": "offset",
          "output_value": "end_pos",
          "output": 10
        },
        {
          "id": 10,
          "type": "spawn_particles",
          "particle_type": "gold_trail",
          "start": "start_pos",
          "end": "end_pos",
          "color": "#FFD700",
          "output": 11
        },
        {
          "id": 11,
          "type": "play_sound",
          "sound": "dash_whoosh",
          "volume": 1.0,
          "output": 12
        },
        {
          "id": 12,
          "type": "get_entities_in_area",
          "shape": "capsule",
          "start": "start_pos",
          "end": "end_pos",
          "radius": 1.5,
          "filter": "players",
          "output_value": "hit_entities",
          "output": 13
        },
        {
          "id": 13,
          "type": "for_each",
          "list": "hit_entities",
          "item_name": "entity",
          "loop_output": 14,
          "done_output": 18
        },
        {
          "id": 14,
          "type": "get_entity_team",
          "entity": "entity",
          "output_value": "entity_team",
          "output": 15
        },
        {
          "id": 15,
          "type": "branch",
          "condition": "entity_team != player_team",
          "true_output": 16,
          "false_output": 13
        },
        {
          "id": 16,
          "type": "damage_entity",
          "entity": "entity",
          "damage": 8,
          "damage_type": "melee",
          "output": 17
        },
        {
          "id": 17,
          "type": "apply_effect",
          "entity": "entity",
          "effect": "slowness",
          "level": 127,
          "duration": 1.5,
          "output": 13,
          "comment": "Max slowness = stun"
        },
        {
          "id": 18,
          "type": "teleport_entity",
          "entity": "self",
          "position": "end_pos",
          "output": 19
        },
        {
          "id": 19,
          "type": "display_message",
          "message": "Valor Strike!",
          "target": "self"
        }
      ]
    },
    {
      "name": "Rally_Cry",
      "trigger": "on_key_press",
      "trigger_key": "E",
      "nodes": [
        {
          "id": 1,
          "type": "event",
          "event": "on_key_press",
          "key": "E",
          "output": 2
        },
        {
          "id": 2,
          "type": "get_variable",
          "variable": "rally_cooldown",
          "output_value": "cd",
          "output": 3
        },
        {
          "id": 3,
          "type": "branch",
          "condition": "cd >= 45",
          "true_output": 5,
          "false_output": 4
        },
        {
          "id": 4,
          "type": "display_message",
          "message": "Rally Cry on cooldown!",
          "target": "self"
        },
        {
          "id": 5,
          "type": "set_variable",
          "variable": "rally_cooldown",
          "value": 0,
          "output": 6
        },
        {
          "id": 6,
          "type": "get_player_position",
          "output_value": "center",
          "output": 7
        },
        {
          "id": 7,
          "type": "spawn_particles",
          "particle_type": "ring_expand",
          "position": "center",
          "radius": 15,
          "color": "#00FF00",
          "output": 8
        },
        {
          "id": 8,
          "type": "play_sound",
          "sound": "heal_chime",
          "volume": 1.0,
          "output": 9
        },
        {
          "id": 9,
          "type": "get_entities_in_area",
          "shape": "sphere",
          "center": "center",
          "radius": 15,
          "filter": "players",
          "output_value": "nearby_players",
          "output": 10
        },
        {
          "id": 10,
          "type": "for_each",
          "list": "nearby_players",
          "item_name": "ally",
          "loop_output": 11,
          "done_output": 16
        },
        {
          "id": 11,
          "type": "get_entity_team",
          "entity": "ally",
          "output_value": "ally_team",
          "output": 12
        },
        {
          "id": 12,
          "type": "branch",
          "condition": "ally_team == player_team",
          "true_output": 13,
          "false_output": 10
        },
        {
          "id": 13,
          "type": "heal_entity",
          "entity": "ally",
          "amount": 6,
          "output": 14
        },
        {
          "id": 14,
          "type": "remove_effect",
          "entity": "ally",
          "effect": "poison",
          "output": 15
        },
        {
          "id": 15,
          "type": "remove_effect",
          "entity": "ally",
          "effect": "slowness",
          "output": 10
        },
        {
          "id": 16,
          "type": "heal_entity",
          "entity": "self",
          "amount": 4,
          "output": 17
        },
        {
          "id": 17,
          "type": "display_message",
          "message": "Rally Cry!",
          "target": "self"
        }
      ]
    },
    {
      "name": "Heroic_Presence_Passive",
      "trigger": "on_timer",
      "interval": 1.0,
      "nodes": [
        {
          "id": 1,
          "type": "event",
          "event": "on_timer",
          "interval": 1.0,
          "output": 2
        },
        {
          "id": 2,
          "type": "get_variable",
          "variable": "is_hero",
          "output_value": "hero_check",
          "output": 3
        },
        {
          "id": 3,
          "type": "branch",
          "condition": "hero_check == true",
          "true_output": 4,
          "false_output": null
        },
        {
          "id": 4,
          "type": "get_player_position",
          "output_value": "my_pos",
          "output": 5
        },
        {
          "id": 5,
          "type": "get_entities_in_area",
          "shape": "sphere",
          "center": "my_pos",
          "radius": 10,
          "filter": "players",
          "output_value": "nearby",
          "output": 6
        },
        {
          "id": 6,
          "type": "for_each",
          "list": "nearby",
          "item_name": "ally",
          "loop_output": 7,
          "done_output": 11
        },
        {
          "id": 7,
          "type": "branch",
          "condition": "ally != self AND ally.team == player_team",
          "true_output": 8,
          "false_output": 6
        },
        {
          "id": 8,
          "type": "apply_effect",
          "entity": "ally",
          "effect": "strength",
          "level": 1,
          "duration": 2.0,
          "output": 9
        },
        {
          "id": 9,
          "type": "spawn_particles",
          "particle_type": "sparkle",
          "position": "ally.position",
          "color": "#FFD700",
          "count": 5,
          "output": 6
        },
        {
          "id": 11,
          "type": "get_player_property",
          "property": "health",
          "output_value": "current_hp",
          "output": 12
        },
        {
          "id": 12,
          "type": "get_player_property",
          "property": "max_health",
          "output_value": "max_hp",
          "output": 13
        },
        {
          "id": 13,
          "type": "math_divide",
          "a": "max_hp",
          "b": 2,
          "output_value": "half_hp",
          "output": 14
        },
        {
          "id": 14,
          "type": "branch",
          "condition": "current_hp < half_hp",
          "true_output": 15,
          "false_output": null
        },
        {
          "id": 15,
          "type": "apply_effect",
          "entity": "self",
          "effect": "strength",
          "level": 2,
          "duration": 2.0,
          "output": 16
        },
        {
          "id": 16,
          "type": "spawn_particles",
          "particle_type": "flame",
          "position": "self.position",
          "color": "#FF4500",
          "count": 10,
          "comment": "Last Stand visual"
        }
      ]
    }
  ]
}
