<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creator Dashboard - Hypixel Creator Manager</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <span class="logo-icon">ğŸ®</span>
        <div class="logo-text">
          <h1>Creator Manager</h1>
          <span class="badge">Hypixel</span>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="overview">
          <span class="nav-icon">ğŸ“Š</span>
          <span>Overview</span>
        </a>
        <a href="#" class="nav-item" data-page="creators">
          <span class="nav-icon">ğŸ‘¥</span>
          <span>All Creators</span>
        </a>
        <a href="#" class="nav-item" data-page="reviews">
          <span class="nav-icon">ğŸ“‹</span>
          <span>Review Queue</span>
          <span class="nav-badge" id="navReviewCount">0</span>
        </a>
        <a href="#" class="nav-item" data-page="warnings">
          <span class="nav-icon">âš ï¸</span>
          <span>Warnings</span>
        </a>
        <a href="#" class="nav-item" data-page="inactive">
          <span class="nav-icon">ğŸ’¤</span>
          <span>Inactive</span>
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <a href="#" class="nav-item" data-page="settings">
          <span class="nav-icon">âš™ï¸</span>
          <span>Settings</span>
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="main-header">
        <div class="header-left">
          <h2 id="pageTitle">Overview</h2>
          <span class="header-subtitle" id="pageSubtitle">Dashboard overview and statistics</span>
        </div>
        <div class="header-right">
          <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" id="searchInput" placeholder="Search creators...">
          </div>
          <div class="data-indicator" id="dataIndicator">
            <span class="status-dot" id="statusDot"></span>
            <span id="dataStatus">No data loaded</span>
          </div>
          <button id="btnExportCSV" class="btn btn-outline" style="display: none;">
            <span>ğŸ“¥</span> Export CSV
          </button>
        </div>
      </header>

      <!-- Page: Overview -->
      <div class="page active" id="page-overview">
        <!-- Upload Section (shown when no data) -->
        <div class="upload-section" id="uploadSection">
          <div class="upload-card">
            <div class="upload-icon">ğŸ“¤</div>
            <h3>Upload Your Creator Sheet</h3>
            <p>Export your Google Sheet as CSV and upload it here to get started</p>
            
            <div class="upload-area" id="uploadArea">
              <input type="file" id="csvFileInput" accept=".csv" hidden>
              <div class="upload-content">
                <span class="upload-cloud">â˜ï¸</span>
                <p><strong>Drop CSV file here</strong></p>
                <p class="upload-hint">or click to browse</p>
              </div>
            </div>
            
            <div class="upload-instructions">
              <h4>How to export from Google Sheets:</h4>
              <ol>
                <li>Open your Creator Sheet in Google Sheets</li>
                <li>Click <strong>File</strong> â†’ <strong>Download</strong> â†’ <strong>Comma-separated values (.csv)</strong></li>
                <li>Upload the downloaded file here</li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Stats Section (shown when data loaded) -->
        <div class="stats-section" id="statsSection" style="display: none;">
          <!-- Stats Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ‘¥</div>
              <div class="stat-info">
                <span class="stat-value" id="statTotalCreators">-</span>
                <span class="stat-label">Total Creators</span>
              </div>
            </div>
            <div class="stat-card stat-warning">
              <div class="stat-icon">ğŸ“‹</div>
              <div class="stat-info">
                <span class="stat-value" id="statNeedsReview">-</span>
                <span class="stat-label">Need Review</span>
              </div>
            </div>
            <div class="stat-card stat-danger">
              <div class="stat-icon">âš ï¸</div>
              <div class="stat-info">
                <span class="stat-value" id="statWarnings">-</span>
                <span class="stat-label">Have Warnings</span>
              </div>
            </div>
            <div class="stat-card stat-info">
              <div class="stat-icon">ğŸ’¤</div>
              <div class="stat-info">
                <span class="stat-value" id="statInactive">-</span>
                <span class="stat-label">Inactive (6+ mo)</span>
              </div>
            </div>
          </div>

          <!-- Last Updated -->
          <div class="last-updated" id="lastUpdated">
            <span>ğŸ“… Data loaded: <strong id="lastUpdatedTime">-</strong></span>
            <button id="btnReloadCSV" class="btn btn-outline btn-small">
              <span>ğŸ”„</span> Upload New CSV
            </button>
          </div>

          <!-- Charts Row -->
          <div class="charts-row">
            <div class="chart-card">
              <h3>Creators by Rank</h3>
              <div class="chart-placeholder" id="chartRanks">
                <div class="chart-bars"></div>
              </div>
            </div>
            <div class="chart-card">
              <h3>Creators by Language</h3>
              <div class="chart-placeholder" id="chartLanguages">
                <div class="chart-bars"></div>
              </div>
            </div>
          </div>

          <!-- Recent Activity -->
          <div class="activity-section">
            <h3>Review Queue Preview</h3>
            <div class="activity-list" id="recentQueue">
              <div class="empty-state">
                <span class="empty-icon">ğŸ‰</span>
                <p>All caught up! No creators need review.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Page: All Creators -->
      <div class="page" id="page-creators">
        <div class="page-actions">
          <button id="btnRefreshCreators" class="btn btn-outline">
            <span>ğŸ”„</span> Refresh
          </button>
          <button id="btnExportCreators" class="btn btn-outline">
            <span>ğŸ“¥</span> Export CSV
          </button>
        </div>
        
        <div class="table-container">
          <table class="data-table" id="creatorsTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Rank</th>
                <th>Subscribers</th>
                <th>Last Upload</th>
                <th>Last Checked</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="creatorsTableBody">
              <tr>
                <td colspan="7" class="empty-cell">Upload a CSV to see creators</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Page: Review Queue -->
      <div class="page" id="page-reviews">
        <div class="page-actions">
          <button id="btnBulkReview" class="btn btn-primary" disabled>
            <span>âœ“</span> Review Selected
          </button>
          <button id="btnRefreshQueue" class="btn btn-outline">
            <span>ğŸ”„</span> Refresh
          </button>
        </div>
        
        <div class="review-list" id="reviewList">
          <div class="empty-state">
            <span class="empty-icon">ğŸ“‹</span>
            <p>Upload a CSV to see creators needing review</p>
          </div>
        </div>
      </div>

      <!-- Page: Warnings -->
      <div class="page" id="page-warnings">
        <div class="warnings-list" id="warningsList">
          <div class="empty-state">
            <span class="empty-icon">âš ï¸</span>
            <p>Upload a CSV to see creators with warnings</p>
          </div>
        </div>
      </div>

      <!-- Page: Inactive -->
      <div class="page" id="page-inactive">
        <div class="inactive-list" id="inactiveList">
          <div class="empty-state">
            <span class="empty-icon">ğŸ’¤</span>
            <p>Upload a CSV to see inactive creators</p>
          </div>
        </div>
      </div>

      <!-- Page: Settings -->
      <div class="page" id="page-settings">
        <div class="settings-section">
          <h3>ğŸ“¤ Data Management</h3>
          <div class="setting-group">
            <label>Upload New CSV</label>
            <p class="setting-help">Replace current data with a new CSV export from Google Sheets</p>
            <div class="upload-mini" id="uploadMini">
              <input type="file" id="csvFileInputSettings" accept=".csv" hidden>
              <button class="btn btn-outline" id="btnUploadSettings">
                <span>ğŸ“¤</span> Choose CSV File
              </button>
            </div>
          </div>
          <div class="setting-group">
            <label>Export Current Data</label>
            <p class="setting-help">Download your data with all changes as a CSV file</p>
            <button id="btnExportSettings" class="btn btn-primary">
              <span>ğŸ“¥</span> Export to CSV
            </button>
          </div>
          <div class="setting-group">
            <label>Clear All Data</label>
            <p class="setting-help">Remove all creator data from the extension</p>
            <button id="btnClearData" class="btn btn-danger">
              <span>ğŸ—‘ï¸</span> Clear Data
            </button>
          </div>
        </div>
        
        <div class="settings-section">
          <h3>âš™ï¸ Review Settings</h3>
          <div class="setting-group">
            <label>Your Name (for reviews)</label>
            <input type="text" id="settingReviewerName" value="Judge">
          </div>
          <div class="setting-group">
            <label>Overdue Review Threshold (months)</label>
            <input type="number" id="settingOverdueMonths" value="3" min="1" max="12">
          </div>
          <div class="setting-group">
            <label>Inactive Channel Threshold (months)</label>
            <input type="number" id="settingInactiveMonths" value="6" min="1" max="24">
          </div>
          <button id="btnSaveSettings" class="btn btn-primary">Save Settings</button>
        </div>
        
        <div class="settings-section">
          <h3>â„¹ï¸ How It Works</h3>
          <div class="info-box">
            <h4>CSV Workflow</h4>
            <ol>
              <li><strong>Export</strong> your Google Sheet as CSV</li>
              <li><strong>Upload</strong> the CSV to this extension</li>
              <li><strong>Review</strong> creators, add notes, track progress</li>
              <li><strong>Export</strong> your changes back to CSV</li>
              <li><strong>Import</strong> the CSV back to Google Sheets (File â†’ Import)</li>
            </ol>
            <p class="info-note">ğŸ’¡ Your data is stored locally in your browser - no cloud, no accounts needed!</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Modal Title</h3>
        <button class="modal-close" id="modalClose">Ã—</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Dynamic content -->
      </div>
      <div class="modal-footer" id="modalFooter">
        <button class="btn btn-outline" id="modalCancel">Cancel</button>
        <button class="btn btn-primary" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="../lib/csv-manager.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
