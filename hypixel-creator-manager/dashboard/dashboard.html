<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creator Dashboard - Hypixel Creator Manager</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <span class="logo-icon">üéÆ</span>
        <div class="logo-text">
          <h1>HYPIXEL</h1>
          <span class="badge">Creator Manager</span>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="overview">
          <span class="nav-icon">üìä</span>
          <span>Overview</span>
        </a>
        <a href="#" class="nav-item" data-page="creators">
          <span class="nav-icon">üë•</span>
          <span>All Creators</span>
        </a>
        <a href="#" class="nav-item" data-page="reviews">
          <span class="nav-icon">üìã</span>
          <span>Review Queue</span>
          <span class="nav-badge" id="navReviewCount">0</span>
        </a>
        <a href="#" class="nav-item" data-page="warnings">
          <span class="nav-icon">‚ö†Ô∏è</span>
          <span>Warnings</span>
        </a>
        <a href="#" class="nav-item" data-page="inactive">
          <span class="nav-icon">üí§</span>
          <span>Inactive</span>
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <a href="#" class="nav-item" data-page="settings">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="main-header">
        <div class="header-left">
          <h2 id="pageTitle">Overview</h2>
          <span class="header-subtitle" id="pageSubtitle">Dashboard overview and statistics</span>
        </div>
        <div class="header-right">
          <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" id="searchInput" placeholder="Search creators...">
          </div>
          <div class="data-indicator" id="dataIndicator">
            <span class="status-dot" id="statusDot"></span>
            <span id="dataStatus">No data loaded</span>
          </div>
          <button id="btnExportCSV" class="btn btn-outline" style="display: none;">
            <span>üì•</span> Export CSV
          </button>
        </div>
      </header>

      <!-- Page: Overview -->
      <div class="page active" id="page-overview">
        <!-- Upload Section (shown when no data) -->
        <div class="upload-section" id="uploadSection">
          <div class="upload-card">
            <div class="upload-icon">üì§</div>
            <h3>Upload Your Creator Sheet</h3>
            <p>Export your Google Sheet as CSV and upload it here to get started</p>
            
            <div class="upload-area" id="uploadArea">
              <input type="file" id="csvFileInput" accept=".csv" hidden>
              <div class="upload-content">
                <span class="upload-cloud">‚òÅÔ∏è</span>
                <p><strong>Drop CSV file here</strong></p>
                <p class="upload-hint">or click to browse</p>
              </div>
            </div>
            
            <div class="upload-instructions">
              <h4>How to export from Google Sheets:</h4>
              <ol>
                <li>Open your Creator Sheet in Google Sheets</li>
                <li>Click <strong>File</strong> ‚Üí <strong>Download</strong> ‚Üí <strong>Comma-separated values (.csv)</strong></li>
                <li>Upload the downloaded file here</li>
              </ol>
            </div>
            
            <div class="upload-divider">
              <span>OR</span>
            </div>
            
            <button id="btnAddCreatorEmpty" class="btn btn-outline btn-full">
              <span>‚ûï</span> Start Fresh - Add Creators Manually
            </button>
          </div>
        </div>

        <!-- Stats Section (shown when data loaded) -->
        <div class="stats-section" id="statsSection" style="display: none;">
          <!-- Stats Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">üë•</div>
              <div class="stat-info">
                <span class="stat-value" id="statTotalCreators">-</span>
                <span class="stat-label">Total Creators</span>
              </div>
            </div>
            <div class="stat-card stat-warning">
              <div class="stat-icon">üìã</div>
              <div class="stat-info">
                <span class="stat-value" id="statNeedsReview">-</span>
                <span class="stat-label">Need Review</span>
              </div>
            </div>
            <div class="stat-card stat-danger">
              <div class="stat-icon">‚ö†Ô∏è</div>
              <div class="stat-info">
                <span class="stat-value" id="statWarnings">-</span>
                <span class="stat-label">Have Warnings</span>
              </div>
            </div>
            <div class="stat-card stat-info">
              <div class="stat-icon">üí§</div>
              <div class="stat-info">
                <span class="stat-value" id="statInactive">-</span>
                <span class="stat-label">Inactive (6+ mo)</span>
              </div>
            </div>
          </div>

          <!-- Last Updated -->
          <div class="last-updated" id="lastUpdated">
            <span>üìÖ Data loaded: <strong id="lastUpdatedTime">-</strong></span>
            <button id="btnReloadCSV" class="btn btn-outline btn-small">
              <span>üîÑ</span> Upload New CSV
            </button>
          </div>

          <!-- Charts Row -->
          <div class="charts-row">
            <div class="chart-card">
              <h3>Creators by Rank</h3>
              <div class="chart-placeholder" id="chartRanks">
                <div class="chart-bars"></div>
              </div>
            </div>
            <div class="chart-card">
              <h3>Creators by Language</h3>
              <div class="chart-placeholder" id="chartLanguages">
                <div class="chart-bars"></div>
              </div>
            </div>
          </div>

          <!-- Recent Activity -->
          <div class="activity-section">
            <h3>Review Queue Preview</h3>
            <div class="activity-list" id="recentQueue">
              <div class="empty-state">
                <span class="empty-icon">üéâ</span>
                <p>All caught up! No creators need review.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Page: All Creators -->
      <div class="page" id="page-creators">
        <div class="page-actions">
          <button id="btnAddCreator" class="btn btn-primary">
            <span>‚ûï</span> Add Creator
          </button>
          <button id="btnRefreshCreators" class="btn btn-outline">
            <span>üîÑ</span> Refresh
          </button>
          <button id="btnExportCreators" class="btn btn-outline">
            <span>üì•</span> Export CSV
          </button>
        </div>
        
        <div class="table-container">
          <table class="data-table" id="creatorsTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Rank</th>
                <th>Subscribers</th>
                <th>Last Upload</th>
                <th>Last Checked</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="creatorsTableBody">
              <tr>
                <td colspan="7" class="empty-cell">Upload a CSV to see creators</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Page: Review Queue -->
      <div class="page" id="page-reviews">
        <div class="page-actions">
          <button id="btnBulkReview" class="btn btn-primary" disabled>
            <span>‚úì</span> Review Selected
          </button>
          <button id="btnRefreshQueue" class="btn btn-outline">
            <span>üîÑ</span> Refresh
          </button>
        </div>
        
        <div class="review-list" id="reviewList">
          <div class="empty-state">
            <span class="empty-icon">üìã</span>
            <p>Upload a CSV to see creators needing review</p>
          </div>
        </div>
      </div>

      <!-- Page: Warnings -->
      <div class="page" id="page-warnings">
        <div class="warnings-list" id="warningsList">
          <div class="empty-state">
            <span class="empty-icon">‚ö†Ô∏è</span>
            <p>Upload a CSV to see creators with warnings</p>
          </div>
        </div>
      </div>

      <!-- Page: Inactive -->
      <div class="page" id="page-inactive">
        <div class="inactive-list" id="inactiveList">
          <div class="empty-state">
            <span class="empty-icon">üí§</span>
            <p>Upload a CSV to see inactive creators</p>
          </div>
        </div>
      </div>

      <!-- Page: Settings -->
      <div class="page" id="page-settings">
        <div class="settings-section">
          <h3>üì§ Data Management</h3>
          <div class="setting-group">
            <label>Upload New CSV</label>
            <p class="setting-help">Replace current data with a new CSV export from Google Sheets</p>
            <div class="upload-mini" id="uploadMini">
              <input type="file" id="csvFileInputSettings" accept=".csv" hidden>
              <button class="btn btn-outline" id="btnUploadSettings">
                <span>üì§</span> Choose CSV File
              </button>
            </div>
          </div>
          <div class="setting-group">
            <label>Export Current Data</label>
            <p class="setting-help">Download your data with all changes as a CSV file</p>
            <button id="btnExportSettings" class="btn btn-primary">
              <span>üì•</span> Export to CSV
            </button>
          </div>
          <div class="setting-group">
            <label>Clear All Data</label>
            <p class="setting-help">Remove all creator data from the extension</p>
            <button id="btnClearData" class="btn btn-danger">
              <span>üóëÔ∏è</span> Clear Data
            </button>
          </div>
        </div>
        
        <div class="settings-section">
          <h3>‚öôÔ∏è Review Settings</h3>
          <div class="setting-group">
            <label>Your Name (for reviews)</label>
            <input type="text" id="settingReviewerName" value="Judge">
          </div>
          <div class="setting-group">
            <label>Overdue Review Threshold (months)</label>
            <input type="number" id="settingOverdueMonths" value="3" min="1" max="12">
          </div>
          <div class="setting-group">
            <label>Inactive Channel Threshold (months)</label>
            <input type="number" id="settingInactiveMonths" value="6" min="1" max="24">
          </div>
          <button id="btnSaveSettings" class="btn btn-primary">Save Settings</button>
        </div>
        
        <div class="settings-section">
          <h3>üîë API Integration (Optional)</h3>
          <p class="setting-help">Connect to YouTube and Twitch APIs to fetch live channel statistics on creator profile pages.</p>
          
          <div class="setting-group">
            <label>YouTube Data API Key</label>
            <p class="setting-help">Get a free API key from <a href="https://console.cloud.google.com/apis/library/youtube.googleapis.com" target="_blank" style="color: var(--hypixel-gold);">Google Cloud Console</a></p>
            <div class="api-key-input">
              <input type="password" id="settingYoutubeApiKey" placeholder="Enter your YouTube API key">
              <button class="btn btn-outline btn-small" id="btnToggleYoutubeKey">Show</button>
            </div>
            <span class="api-status-badge" id="youtubeApiStatusBadge">Not Configured</span>
          </div>
          
          <div class="setting-group">
            <label>Twitch Client ID</label>
            <p class="setting-help">Get credentials from <a href="https://dev.twitch.tv/console/apps" target="_blank" style="color: var(--hypixel-gold);">Twitch Developer Console</a></p>
            <div class="api-key-input">
              <input type="password" id="settingTwitchClientId" placeholder="Enter your Twitch Client ID">
              <button class="btn btn-outline btn-small" id="btnToggleTwitchId">Show</button>
            </div>
          </div>
          
          <div class="setting-group">
            <label>Twitch Client Secret</label>
            <div class="api-key-input">
              <input type="password" id="settingTwitchClientSecret" placeholder="Enter your Twitch Client Secret">
              <button class="btn btn-outline btn-small" id="btnToggleTwitchSecret">Show</button>
            </div>
            <span class="api-status-badge" id="twitchApiStatusBadge">Not Configured</span>
          </div>
          
          <button id="btnSaveApiKeys" class="btn btn-primary">Save API Keys</button>
        </div>

        <div class="settings-section">
          <h3>‚ÑπÔ∏è How It Works</h3>
          <div class="info-box">
            <h4>CSV Workflow</h4>
            <ol>
              <li><strong>Export</strong> your Google Sheet as CSV</li>
              <li><strong>Upload</strong> the CSV to this extension</li>
              <li><strong>Review</strong> creators, add notes, track progress</li>
              <li><strong>Export</strong> your changes back to CSV</li>
              <li><strong>Import</strong> the CSV back to Google Sheets (File ‚Üí Import)</li>
            </ol>
            <p class="info-note">üí° Your data is stored locally in your browser - no cloud, no accounts needed!</p>
          </div>
          <div class="info-box" style="margin-top: 16px;">
            <h4>API Integration (Optional)</h4>
            <ol>
              <li><strong>YouTube API</strong> - Fetches subscriber count, view count, recent videos</li>
              <li><strong>Twitch API</strong> - Fetches follower count, recent streams</li>
              <li>API keys are stored locally and never shared</li>
              <li>Free tier limits are generous (YouTube: 10,000/day, Twitch: unlimited)</li>
            </ol>
            <p class="info-note">üîí Your API keys are stored securely in your browser's sync storage.</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Modal Title</h3>
        <button class="modal-close" id="modalClose">√ó</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Dynamic content -->
      </div>
      <div class="modal-footer" id="modalFooter">
        <button class="btn btn-outline" id="modalCancel">Cancel</button>
        <button class="btn btn-primary" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Add Creator Modal -->
  <div class="modal" id="addCreatorModal">
    <div class="modal-backdrop" id="addCreatorBackdrop"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3>‚ûï Add New Creator</h3>
        <button class="modal-close" id="addCreatorClose">√ó</button>
      </div>
      <div class="modal-body">
        <form id="addCreatorForm" class="add-creator-form">
          <!-- Basic Info -->
          <div class="form-section">
            <h4>üìã Basic Information</h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="newCreatorName">Name *</label>
                <input type="text" id="newCreatorName" required placeholder="Creator's display name">
              </div>
              <div class="form-group">
                <label for="newCreatorChannel">Main Channel URL *</label>
                <div class="input-with-button">
                  <input type="url" id="newCreatorChannel" required placeholder="https://youtube.com/... or twitch.tv/...">
                  <button type="button" id="btnFetchChannelStats" class="btn btn-small btn-outline">üìä Fetch Stats</button>
                </div>
                <span class="field-hint" id="channelHint">Enter YouTube/Twitch URL and click Fetch Stats</span>
              </div>
              <div class="form-group">
                <label for="newCreatorIGN">Minecraft IGN</label>
                <div class="input-with-button">
                  <input type="text" id="newCreatorIGN" placeholder="Minecraft username">
                  <button type="button" id="btnLookupUUID" class="btn btn-small btn-outline">üîç Lookup</button>
                </div>
              </div>
              <div class="form-group">
                <label for="newCreatorUUID">Minecraft UUID</label>
                <input type="text" id="newCreatorUUID" placeholder="Will auto-fill from IGN lookup" readonly>
                <span class="field-hint" id="uuidHint">Enter IGN above and click Lookup</span>
              </div>
              <div class="form-group">
                <label for="newCreatorCode">Creator Code</label>
                <input type="text" id="newCreatorCode" placeholder="Creator code (if any)">
              </div>
            </div>
          </div>

          <!-- Channel Stats -->
          <div class="form-section">
            <h4>üìä Channel Stats <span class="section-hint" id="statsAutoFillHint">(Click "Fetch Stats" above to auto-fill)</span></h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="newCreatorSubs">Subscribers</label>
                <input type="text" id="newCreatorSubs" placeholder="Auto-fills from API or enter manually">
              </div>
              <div class="form-group">
                <label for="newCreatorRank">Rank Given</label>
                <select id="newCreatorRank">
                  <option value="">Select rank...</option>
                  <option value="YOUTUBER">YOUTUBER</option>
                  <option value="STREAMER">STREAMER</option>
                  <option value="CREATOR">CREATOR</option>
                  <option value="VIP">VIP</option>
                </select>
              </div>
              <div class="form-group">
                <label for="newCreatorContentType">Content Type</label>
                <select id="newCreatorContentType">
                  <option value="">Select type...</option>
                  <option value="Gaming">Gaming</option>
                  <option value="Non-Gaming">Non-Gaming</option>
                  <option value="Mixed">Mixed</option>
                </select>
              </div>
              <div class="form-group">
                <label for="newCreatorLanguage">Content Language</label>
                <input type="text" id="newCreatorLanguage" placeholder="e.g., English">
              </div>
            </div>
          </div>

          <!-- Acceptance Info -->
          <div class="form-section">
            <h4>‚úÖ Acceptance Info</h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="newCreatorDateAccepted">Date Accepted</label>
                <input type="date" id="newCreatorDateAccepted">
              </div>
              <div class="form-group">
                <label for="newCreatorAcceptedBy">Accepted By</label>
                <input type="text" id="newCreatorAcceptedBy" placeholder="Who accepted them">
              </div>
              <div class="form-group">
                <label for="newCreatorVerifiedBy">Verified By</label>
                <input type="text" id="newCreatorVerifiedBy" placeholder="Who verified them">
              </div>
              <div class="form-group">
                <label for="newCreatorLocale">Locale</label>
                <input type="text" id="newCreatorLocale" placeholder="e.g., US, UK, DE">
              </div>
            </div>
          </div>

          <!-- Contact Info -->
          <div class="form-section">
            <h4>üìß Contact Info</h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="newCreatorEmail">Contact Email</label>
                <input type="email" id="newCreatorEmail" placeholder="creator@email.com">
              </div>
              <div class="form-group">
                <label for="newCreatorZendesk">Zendesk ID</label>
                <input type="text" id="newCreatorZendesk" placeholder="Zendesk ticket ID">
              </div>
            </div>
          </div>

          <!-- Notes -->
          <div class="form-section">
            <h4>üìù Notes</h4>
            <div class="form-group full-width">
              <label for="newCreatorNotes">Initial Notes</label>
              <textarea id="newCreatorNotes" rows="3" placeholder="Any notes about this creator..."></textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="addCreatorCancel">Cancel</button>
        <button class="btn btn-primary" id="addCreatorSubmit">
          <span>‚ûï</span> Add Creator
        </button>
      </div>
    </div>
  </div>

  <script src="../lib/csv-manager.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
